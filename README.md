# GitLab Omnibus project

This project creates full-stack platform-specific packages for
GitLab!

## Installation

After the steps below your GitLab instance should reachable over HTTP,
and have an admin user with username `root` and password `5iveL!fe`.

### Ubuntu

```
sudo apt-get install openssh-server
sudo apt-get install postfix # sendmail or exim is also OK
sudo dpkg -i gitlab-x.y.z.deb # this is the .deb you downloaded
sudo gitlab-ctl reconfigure
```

### CentOS 6.5

```
sudo yum install openssh-server
sudo yum install postfix # sendmail or exim is also OK
sudo rpm -i gitlab-x.y.z.rpm
sudo gitlab-ctl reconfigure
# Open up the firewall for HTTP and SSH
sudo lokkit -s http -s ssh
```

## How to manage an Omnibus-installed GitLab

### Administrative commands

You can make configuration changes by editing `/etc/gitlab/gitlab.rb` and
`/etc/gitlab/gitlab-secrets.json`, followed by running

```
sudo gitlab-ctl reconfigure
```

To start/stop a component of GitLab run e.g.
`sudo gitlab-ctl stop sidekiq`. To permanently disable e.g. Sidekiq, add
`sidekiq['enable'] = false` to `/etc/gitlab/gitlab.rb`, and run
`sudo gitlab-ctl reconfigure` for the change to take effect.

To invoke a GitLab rake task, use `gitlab-rake`. For example:

```
sudo gitlab-rake gitlab:backup:create
```

There is no need to change the user or the `RAILS_ENV` environment variable;
this is taken care of by the `gitlab-rake` wrapper script.

### Directory structure

Omnibus-gitlab uses four different directories.

- `/opt/gitlab` holds application code for GitLab and its dependencies.
- `/var/opt/gitlab` holds application data and configuration files that
  `gitlab-ctl reconfigure` writes to.
- `/etc/gitlab` holds configuration files for omnibus-gitlab. These are
  the only files that you should ever have to edit manually.
- `/var/log/gitlab` contains all log data generated by components of
  omnibus-gitlab.

## Building your own package

See (doc/build.md).
